# Makefile cho Lambda functions

.PHONY: build clean help

# Default target
all: build

# Build t·∫•t c·∫£ Lambda functions
build:
	@echo "üöÄ Building Lambda functions..."
	@./build.sh

# X√≥a c√°c file build
clean:
	@echo "üßπ Cleaning up build artifacts..."
	@rm -f *.zip
	@rm -rf build/
	@echo "‚úÖ Cleanup completed"

# Build m·ªôt function c·ª• th·ªÉ
build-query:
	@echo "üì¶ Building query_handler only..."
	@cd lambda && zip -r ../query_handler.zip query_handler.py

build-stream:
	@echo "üì¶ Building stream_processor only..."
	@cd lambda && zip -r ../stream_processor.zip stream_processor.py

# Hi·ªÉn th·ªã th√¥ng tin c√°c file build
info:
	@echo "üìÅ Lambda deployment packages:"
	@ls -la *.zip 2>/dev/null || echo "Ch∆∞a c√≥ file n√†o ƒë∆∞·ª£c build"

# Hi·ªÉn th·ªã help
help:
	@echo "üõ†Ô∏è  Lambda Build Commands:"
	@echo ""
	@echo "  make build        - Build t·∫•t c·∫£ Lambda functions"
	@echo "  make clean        - X√≥a c√°c file build"
	@echo "  make build-query  - Build ch·ªâ query_handler"
	@echo "  make build-stream - Build ch·ªâ stream_processor"
	@echo "  make info         - Hi·ªÉn th·ªã th√¥ng tin c√°c file build"
	@echo "  make help         - Hi·ªÉn th·ªã help n√†y"
	@echo ""
	@echo "üìù Note: C√°c file .zip s·∫Ω ƒë∆∞·ª£c t·∫°o trong th∆∞ m·ª•c hi·ªán t·∫°i"